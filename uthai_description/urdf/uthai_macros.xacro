<?xml version="1.0"?>
<robot>
    <!-- <macro name="cylinder_inertia" params="m r h"><inertia ixx="${m*(3*r*r+h*h)/12}" ixy = "0" ixz = "0" iyy="${m*(3*r*r+h*h)/12}" iyz = "0" izz="${m*r*r/2}" /></macro><macro name="box_inertia" params="m x y z"><inertia ixx="${m*(y*y+z*z)/12}" ixy = "0" ixz = "0" iyy="${m*(x*x+z*z)/12}" iyz = "0" izz="${m*(x*x+z*z)/12}" /></macro><macro name="sphere_inertia" params="m r"><inertia ixx="${2*m*r*r/5}" ixy = "0" ixz = "0" iyy="${2*m*r*r/5}" iyz = "0" izz="${2*m*r*r/5}" /></macro> -->
    <!-- <macro name="wheel" params="lr tY"><link name="${lr}_wheel"><collision><origin xyz="0 0 0" rpy="0 ${PI/2} ${PI/2}" /><geometry><cylinder length="${wheelWidth}" radius="${wheelRadius}"/></geometry></collision><visual><origin xyz="0 0 0" rpy="0 ${PI/2} ${PI/2}" /><geometry><cylinder length="${wheelWidth}" radius="${wheelRadius}"/></geometry><material name="black"/></visual><inertial><origin xyz="0 0 0" rpy="0 ${PI/2} ${PI/2}" /><mass value="${wheelMass}"/><cylinder_inertia m="${wheelMass}" r="${wheelRadius}" h="${wheelWidth}"/></inertial></link><gazebo reference="${lr}_wheel"><mu1 value="1.0"/><mu2 value="1.0"/><kp value="10000000.0" /><kd value="1.0" /><fdir1 value="1 0 0"/><material>Gazebo/Black</material></gazebo><joint name="${lr}_wheel_hinge" type="continuous"><parent link="chassis"/><child link="${lr}_wheel"/><origin xyz="${-wheelPos+chassisLength/2} ${tY*wheelWidth/2+tY*chassisWidth/2} ${wheelRadius}" rpy="0 0 0" /><axis xyz="0 1 0" rpy="0 0 0" /><limit effort="10000" velocity="10000"/><joint_properties damping="0.0" friction="0.0"/></joint><transmission name="${lr}_trans"><type>transmission_interface/SimpleTransmission</type><joint name="${lr}_wheel_hinge"><hardwareInterface>EffortJointInterface</hardwareInterface></joint><actuator name="${lr}Motor"><hardwareInterface>EffortJointInterface</hardwareInterface><mechanicalReduction>10</mechanicalReduction></actuator></transmission></macro> -->
    <!-- <xacro:property name="B" value="0.290" /><xacro:property name="S" value="0.145" /><xacro:property name="T" value="0.320" /> -->
    <macro name="visualize" params="fname">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="package://uthai_description/meshes/${fname}" scale="1 1 1"/>
            </geometry>
            <material name="blue"/>
        </visual>
        <collision>
            <geometry>
                <mesh filename="package://uthai_description/meshes/${fname}" scale="1 1 1"/>
            </geometry>
        </collision>
    </macro>
    <macro name="transmis" params="jname">
        <transmission name="t_${jname}">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${jname}">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="m_${jname}">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>
    </macro>
    <!-- <macro name="gz" params="lname"><gazebo reference="${lname}"><material>Gazebo/Blue</material></gazebo></macro> -->
    <macro name="uthai_leg" params="pf reflect">
        <link name="${pf}_hip_yaw">
            <visualize fname="${pf}_hip_yaw.STL"/>
        </link>
        <link name="${pf}_hip_pitch">
            <visualize fname="${pf}_hip_pitch.STL"/>
        </link>
        <link name="${pf}_hip_roll">
            <visualize fname="${pf}_hip_roll.STL"/>
        </link>
        <link name="${pf}_knee_pitch">
            <visualize fname="${pf}_knee_pitch.STL"/>
        </link>
        <link name="${pf}_ankle_pitch">
            <visualize fname="${pf}_ankle_pitch.STL"/>
        </link>
        <link name="${pf}_ankle_roll">
            <visualize fname="${pf}_ankle_roll.STL"/>
        </link>
        <link name="${pf}_foot"/>
        <link name="${pf}_foot_ref"/>
        <joint name="${pf}_j_hip_yaw" type="revolute">
            <origin rpy="0 0 ${-pi/2}" xyz="0 -0.09 -0.055"/>
            <parent link="body"/>
            <child link="${pf}_hip_yaw"/>
            <axis xyz="0 0 1"/>
            <limit effort="10" lower="-2.6179939" upper="2.6179939" velocity="5.6548668"/>
        </joint>
        <joint name="${pf}_j_hip_roll" type="revolute">
            <origin rpy="${-pi/2} 0 ${pi/2}" xyz="0 0 -0.04"/>
            <parent link="${pf}_hip_yaw"/>
            <child link="${pf}_hip_roll"/>
            <axis xyz="0 0 1"/>
            <limit effort="10" lower="-2.6179939" upper="2.6179939" velocity="5.6548668"/>
        </joint>
        <joint name="${pf}_j_hip_pitch" type="revolute">
            <origin rpy="${pi/2} 0 ${pi/2}" xyz="0 0 0"/>
            <parent link="${pf}_hip_roll"/>
            <child link="${pf}_hip_pitch"/>
            <axis xyz="0 0 1"/>
            <limit effort="10" lower="-2.6179939" upper="2.6179939" velocity="5.6548668"/>
        </joint>
        <joint name="${pf}_j_knee_pitch" type="revolute">
            <origin rpy="${-pi/2} 0 0" xyz="0.3 0 0"/>
            <parent link="${pf}_hip_roll"/>
            <child link="${pf}_knee_pitch"/>
            <axis xyz="0 0 1"/>
            <limit effort="10" lower="-2.6179939" upper="2.6179939" velocity="5.6548668"/>
        </joint>
        <joint name="${pf}_j_ankle_pitch" type="revolute">
            <origin rpy="0 0 0" xyz="0.315 0 0"/>
            <parent link="${pf}_knee_pitch"/>
            <child link="${pf}_ankle_pitch"/>
            <axis xyz="0 0 1"/>
            <limit effort="10" lower="-2.6179939" upper="2.6179939" velocity="5.6548668"/>
        </joint>
        <joint name="${pf}_j_ankle_roll" type="revolute">
            <origin rpy="${pi/2} 0 0" xyz="0 0 0"/>
            <parent link="${pf}_ankle_pitch"/>
            <child link="${pf}_ankle_roll"/>
            <axis xyz="0 0 1"/>
            <limit effort="10" lower="-2.6179939" upper="2.6179939" velocity="5.6548668"/>
        </joint>
        <joint name="${pf}_j_foot" type="fixed">
            <origin rpy="${-pi/2} 0 0" xyz="0.045 0 0"/>
            <parent link="${pf}_ankle_roll"/>
            <child link="${pf}_foot"/>
        </joint>
        <joint name="${pf}_j_foot_ref" type="fixed">
            <origin rpy="${pi/2} 0 ${-pi/2}" xyz="0 -0.058 0.0"/>
            <parent link="${pf}_foot"/>
            <child link="${pf}_foot_ref"/>
        </joint>
        <transmis jname="${pf}_j_hip_yaw" />
        <transmis jname="${pf}_j_hip_pitch" />
        <transmis jname="${pf}_j_hip_roll" />
        <transmis jname="${pf}_j_knee_pitch" />
        <transmis jname="${pf}_j_ankle_pitch" />
        <transmis jname="${pf}_j_ankle_roll" />
        <!-- <transmis jname="${pf}_j_foot" /> -->
        <!-- <transmis jname="${pf}_j_foot_ref" /> -->
        <!-- <gz lname="${pf}_hip_yaw" /><gz lname="${pf}_hip_pitch" /><gz lname="${pf}_hip_roll" /><gz lname="${pf}_knee_pitch" /><gz lname="${pf}_ankle_pitch" /><gz lname="${pf}_ankle_roll" /> -->
        <!-- <gz jname="${pf}_foot" /> -->
    </macro>
</robot>

